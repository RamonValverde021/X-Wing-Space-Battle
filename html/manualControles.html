<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta name="author" content="Ramon Valverde">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Jogo estilo retrô de combate espacial inspirado em StarWars">
    <title>Manual</title>
    <link rel="icon" href="../images/icon-192.png">
    <link rel="stylesheet" type="text/css" href="../css/manualControles.css">
</head>
<style>

</style>

<body id="controles">
    <div class="painel_comandos">
        <section class="painel_dados">
            <span id="legenda_instrucoes" class="item_comando">Controle &nbsp; &nbsp; / &nbsp; &nbsp; Teclado &nbsp;
                &nbsp; = &nbsp; &nbsp;
                Funcao</span><br>
            <span class="item_comando">⬆<span class="item_legenda"> = &nbsp; &nbsp; Mover &nbsp; nave &nbsp; para &nbsp;
                    cima</span></span>
            <span class="item_comando">⬇<span class="item_legenda"> = &nbsp; &nbsp; Mover &nbsp; nave &nbsp; para &nbsp;
                    baixo</span></span>
            <span class="item_comando">⬅<span class="item_legenda"> = &nbsp; &nbsp; Mover &nbsp; nave &nbsp; para &nbsp;
                    esquerda</span></span>
            <span class="item_comando">⮕<span class="item_legenda"> = &nbsp; &nbsp; Mover &nbsp; nave &nbsp; para &nbsp;
                    direita</span></span>
            <span class="item_comando">LT / S<span class="item_legenda"> = &nbsp; &nbsp; Giro &nbsp;
                    Reverso</span></span>
            <span class="item_comando">LB / A<span class="item_legenda"> = &nbsp; &nbsp; Girar &nbsp; Nave &nbsp;
                    sentido &nbsp; antihorario</span></span>
            <span class="item_comando">RT / Espaco<span class="item_legenda"> = &nbsp; &nbsp; Atirar</span></span>
            <span class="item_comando">RB / D<span class="item_legenda"> = &nbsp; &nbsp; Girar &nbsp; Nave &nbsp;
                    sentido &nbsp; horario</span></span>
            <span class="item_comando">Y / F<span class="item_legenda"> = &nbsp; &nbsp; Ataque &nbsp;
                    especial</span></span>
            <span class="item_comando">X / W<span class="item_legenda"> = &nbsp; &nbsp; Boost</span></span>
            <span class="item_comando">A / Espaco<span class="item_legenda"> = &nbsp; &nbsp; Atirar</span></span>
            <span class="item_comando">B / Backspace<span class="item_legenda"> = &nbsp; &nbsp; Voltar &nbsp;
                    pagina</span></span>
            <span class="item_comando">START / Enter<span class="item_legenda"> = &nbsp; &nbsp; Inicia &nbsp; o &nbsp;
                    Jogo</span></span>
            <span class="item_comando">BACK / P<span class="item_legenda"> = &nbsp; &nbsp; Abre &nbsp; o &nbsp; painel
                    &nbsp; de &nbsp; estatisticas</span></span>
        </section>
        <a href="../index.html" class="botaoVoltar">❰ &nbsp;&nbsp; Voltar &nbsp;&nbsp; ❱</a>
    </div>

    <script>
        document.addEventListener("keydown", function (event) {               // Função para iniciar o jogo com apertar do Enter
            console.log(event.key);
            if (event.key === "Backspace") {                                  // Se a tecla apertada for o Enter
                window.location.href = '../index.html';
            }
        });
        // Script para ler entradas do controle de X-Box
        window.addEventListener("gamepadconnected", (e) => {
            // Guarda o estado dos botões do frame anterior para detectar cliques (ações de um toque)
            let prevButtons = [];
            // loop para ler as entradas do controle a cada frame
            function update() {                                               // Inicia o loop de atualização que lê as entradas do controle a cada quadro.
                const gp = navigator.getGamepads()[e.gamepad.index];          // Pega o estado atual do gamepad conectado.
                if (!gp) {                                                    // Verifica se o gamepad foi desconectado.
                    // Se o controle for desconectado, para a nave
                    requestAnimationFrame(update);                            // Continua o loop de atualização no próximo quadro.
                    return;                                                   // Sai da função neste quadro, pois não há controle para ler.
                }
                gp.buttons.forEach((button, index) => {                                                            // Itera sobre todos os botões para verificar cliques únicos.
                    const foiClicado = button.pressed && (!prevButtons[index] || !prevButtons[index].pressed);     // Verifica se o botão foi pressionado neste quadro, mas não no anterior.
                    if (foiClicado) {
                        if (index === 1 || index === 3) {
                            window.location.href = '../index.html';                                                                    // Se o botão View/Select (índice 8) foi clicado.
                        }
                    }
                });
                // Salva o estado atual dos botões para comparar no próximo frame
                prevButtons = gp.buttons.map(b => ({ pressed: b.pressed, value: b.value }));                       // Salva o estado atual de todos os botões para a próxima verificação.
                requestAnimationFrame(update);                                                                     // Agenda a próxima execução da função 'update' para o próximo quadro de animação.
            }
            update();
        });

        window.addEventListener("gamepaddisconnected", (e) => {                                                    // Adiciona um ouvinte de evento para quando um controle é desconectado.
            console.log("Controle desconectado:", e.gamepad);                                                      // Exibe no console que o controle foi desconectado.
        });
    </script>
</body>

</html>